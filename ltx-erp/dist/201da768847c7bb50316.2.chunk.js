webpackJsonp([2],{235:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o,s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var d=a(3),u=n(d),c=(a(11),a(5)),f=(n(c),a(9)),p=n(f),h=a(12),m=n(h),b=a(63),v=(n(b),(0,p["default"])(o=function(e){function t(e){l(this,t);var a=i(this,Object.getPrototypeOf(t).call(this,e));return a.state={validateCode:""},a}return r(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.show,a=e.tel,n=e.second,l=e.isValidateFetching,i=e.isBind;return u["default"].createElement("div",{className:"bind-modal",style:{display:t||l?"block":"none"}},u["default"].createElement("main",null,u["default"].createElement("h2",null,i?"绑定电话":"解除绑定"),u["default"].createElement("div",{style:{marginBottom:10/64+"rem"}},"已向",u["default"].createElement("span",null,a),"的手机号发送6位验证码，继续",i?"绑定电话":"解除绑定","请输入该验证码并提交。"),u["default"].createElement("label",null,"手机号"),a,u["default"].createElement("span",null),u["default"].createElement("br",null),u["default"].createElement("label",null,"验证码"),u["default"].createElement("input",{type:"tel",value:this.state.validateCode,onChange:this._handleCodeChange.bind(this)}),u["default"].createElement(m["default"],{className:"get",style:{backgroundColor:60==n?"#ef4f4f":"#b3b3b3"},onTap:this._handleReGet.bind(this)},"重新获取"),60==n?null:u["default"].createElement("span",null,u["default"].createElement("span",{style:{color:"red"}},n),"秒后可重新获取"),u["default"].createElement("footer",null,u["default"].createElement(m["default"],{component:"div",className:"cancel",onTap:this._handleCancle.bind(this)},"取消"),u["default"].createElement(m["default"],{component:"div",className:"save",style:{backgroundColor:6===this.state.validateCode.length?"#ef4f4f":"#b3b3b3"},onTap:this._handleSave.bind(this)},l?"正在验证...":"确认"))))}},{key:"_handleCancle",value:function(){this.props.onCancel()}},{key:"_handleSave",value:function(){6===this.state.validateCode.length&&this.props.onSave(this.state.validateCode)}},{key:"_handleReGet",value:function(){60===this.props.second&&this.props.onReGet()}},{key:"_handleCodeChange",value:function(e){this.setState({validateCode:e.target.value})}}]),t}(d.Component))||o);t["default"]=v},236:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o,s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var d=a(3),u=n(d),c=(a(11),a(5)),f=(n(c),a(9)),p=n(f),h=a(12),m=n(h),b=a(63),v=(n(b),a(61)),g=n(v),y=(0,p["default"])(o=function(e){function t(e){return l(this,t),i(this,Object.getPrototypeOf(t).call(this,e))}return r(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.show,a=e.isValidateFetching,n=e.isValidateSuccess,l=e.onBack,i=e.onRetry,r=e.isBind;return u["default"].createElement("div",{className:"bind-modal",style:{display:t&&!a?"block":"none"}},n?u["default"].createElement("main",null,u["default"].createElement("img",{src:g["default"]}),u["default"].createElement("h2",null,r?"验证成功":"解绑成功"),u["default"].createElement("span",{style:{lineHeight:"0.625rem",display:r?"none":"block"}},"请输入新的11位手机号，并继续完成新手机号的验证，否则解绑无效"),u["default"].createElement("footer",null,u["default"].createElement(m["default"],{className:"save",onTap:l},"知道了"))):u["default"].createElement("main",null,u["default"].createElement("h2",null,r?"解绑失败":"验证失败"),u["default"].createElement("footer",null,u["default"].createElement(m["default"],{className:"cancel",onTap:l},"返回"),u["default"].createElement(m["default"],{className:"save",onTap:i},"重试"))))}}]),t}(d.Component))||o;t["default"]=y},241:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,d,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0,a(498);var f=a(3),p=n(f),h=a(11),m=a(5),b=(n(m),a(9)),v=n(b),g=a(12),y=n(g),_=a(63),x=n(_),k=a(25),E=a(235),w=n(E),S=a(236),R=n(S),C=a(61),B=n(C),O=a(48),T=n(O),P=(s=(0,h.connect)(function(e){return{personal:e.get("personal")}}),(0,v["default"])(d=s(d=function(e){function t(e){i(this,t);var a=r(this,Object.getPrototypeOf(t).call(this,e));return a.state={releaseBindShow:!1,second:60,isShowValidateResult:!1,name:{require:!0,value:"",isError:!1},tel:{require:!0,value:"",isError:!1},bankcard:{require:!0,value:"",isError:!1}},a._reduce=a._reduce.bind(a),a._handleReleaseBindCancel=a._handleReleaseBindCancel.bind(a),a._handleReleaseBindSave=a._handleReleaseBindSave.bind(a),a._handleReleaseBind=a._handleReleaseBind.bind(a),a._handleReGet=a._handleReGet.bind(a),a._releaseResultBack=a._releaseResultBack.bind(a),a._releaseResultRetry=a._releaseResultRetry.bind(a),a._handleSave=a._handleSave.bind(a),a._handleCancel=a._handleCancel.bind(a),a}return o(t,e),c(t,[{key:"componentDidMount",value:function(){this.props.dispatch((0,k.fetchPersonalIfNeed)()),this.props.personal.get("isPerfectInfo")&&this._props2State(this.props),document.title="合伙人信息",this.setState({name:{require:!0,value:this.props.personal.get("name"),isError:!1},tel:{require:!0,value:this.props.personal.get("tel"),isError:!1},bankcard:{require:!0,value:this.props.personal.get("bankcard"),isError:!1}})}},{key:"componentWillReceiveProps",value:function(e){this._props2State(e)}},{key:"render",value:function(){var e=this.props.personal;return e.get("isFetchingPersonal")?this.renderIfFetching():this.renderIfComplete()}},{key:"renderIfFetching",value:function(){return p["default"].createElement(T["default"],null)}},{key:"renderIfComplete",value:function(){var e=this.state,t=e.releaseBindShow,a=e.second,n=e.isShowValidateResult,l=e.name,i=e.tel,r=e.bankcard,o=this.props.personal,s=o.get("validate");return p["default"].createElement("div",{className:"personal-update"},p["default"].createElement("section",{style:{display:this.props.location.query.from?"block":"none",textAlign:"center",overflow:"hidden"}},p["default"].createElement("img",{style:{margin:"auto",display:"block",width:"150px",height:"150px"},src:B["default"]}),p["default"].createElement("span",{style:{display:"inline-block",color:"#ef4f4f",fontSize:"18px",padding:"20px"}},"您的推荐信息已提交。请完善个人信息，便于日后发放奖励。")),p["default"].createElement(x["default"],{onChange:this._handleChange.bind(this),value:l.value,onBlur:this._handleBlur.bind(this),isError:l.isError,name:"name",label:"姓名"}),p["default"].createElement(x["default"],{disabled:!s.get("isNeedToValidate"),value:i.value,isError:i.isError,onChange:this._handleChange.bind(this),onBlur:this._handleBlur.bind(this),name:"tel",label:"手机号"},s.get("isNeedToValidate")?null:p["default"].createElement(y["default"],{component:"div",className:"tel-bind",onTap:this._handleReleaseBind},"解绑")),p["default"].createElement(x["default"],{value:r.value,onChange:this._handleChange.bind(this),onBlur:this._handleBlur.bind(this),name:"bankcard",label:"银行卡"}),p["default"].createElement("section",{style:{textAlign:"center",marginBottom:"10px",marginTop:"-20px"}},p["default"].createElement("span",{style:{lineHeight:"30px",display:"inline",width:"100%",fontSize:"18px",color:"#ccc"}},"若非本人持卡，请注明姓名，如6654 XXXX XXXX XXXX，李明")),p["default"].createElement("section",{className:"default-input"},p["default"].createElement("span",null,"专属服务人"),o.get("empName")),p["default"].createElement("footer",null,p["default"].createElement(y["default"],{className:"cancel",onTap:this._handleCancel},"取消"),p["default"].createElement(y["default"],{className:"save",onTap:this._handleSave},"完成")),p["default"].createElement(w["default"],{show:t,tel:i.value,isValidateFetching:o.getIn(["validate","isFetching"]),second:a,onCancel:this._handleReleaseBindCancel,onReGet:this._handleReGet,isBind:s.get("isNeedToValidate"),onSave:this._handleReleaseBindSave}),p["default"].createElement(R["default"],{show:n&&!o.get("isFetchingPersonal"),isBind:!s.get("isNeedToValidate"),isValidateFetching:o.getIn(["validate","isFetching"]),isValidateSuccess:o.getIn(["validate","isSuccess"]),onBack:this._releaseResultBack,onRetry:this._releaseResultRetry}))}},{key:"_handleSave",value:function(){var e=this;["name","tel"].forEach(function(t){e._handleBlur({target:{name:t,value:e.state[t].value}})}),setTimeout(function(){var t=e.state,a=t.name,n=t.tel;t.bankcard;a.isError||n.isError||(e.props.personal.getIn(["validate","isNeedToValidate"])?e._handleReleaseBind():(e.props.dispatch((0,k.refreshPersonal)({name:e.state.name.value,bankcard:e.state.bankcard.value})),e.props.dispatch((0,k.updatePersonal)())))})}},{key:"_handleCancel",value:function(){this._props2State(this.props),this.props.history.goBack()}},{key:"_handleBlur",value:function(e){""==e.target.value?this.setState(l({},e.target.name,u({},this.state[e.target.name],{value:"",isError:!0}))):this.setState(l({},e.target.name,u({},this.state[e.target.name],{isError:!1})))}},{key:"_handleChange",value:function(e){""==e.target.value&&this.state[e.target.name].require?this.setState(l({},e.target.name,u({},this.state[e.target.name],{value:"",isError:!0}))):this.setState(l({},e.target.name,u({},this.state[e.target.name],{value:e.target.value})))}},{key:"_handleReleaseBind",value:function(){this.setState({releaseBindShow:!0}),this._reduceFlag||(this.props.dispatch((0,k.sendValidateCode)(this.state.tel.value)),this._reduce(),this._reduceFlag=!0)}},{key:"_handleReleaseBindCancel",value:function(){this.setState({releaseBindShow:!1})}},{key:"_handleReGet",value:function(){this._reduceFlag||(this._reduce(),this._reduceFlag=!0)}},{key:"_handleReleaseBindSave",value:function(e){this.setState({releaseBindShow:!1,isShowValidateResult:!0}),this.props.personal.getIn(["validate","isNeedToValidate"])?(this.props.dispatch((0,k.refreshPersonal)({name:this.state.name.value,tel:this.state.tel.value,bankcard:this.state.bankcard.value})),this.props.dispatch((0,k.validateCode)(this.state.tel.value,e))):(this.props.dispatch((0,k.refreshPersonal)({name:this.state.name.value,tel:"",bankcard:this.state.bankcard.value})),this.props.dispatch((0,k.validateCode)(this.state.tel.value,e)))}},{key:"_releaseResultBack",value:function(){this.setState({releaseBindShow:!1,isShowValidateResult:!1}),this._resetTime(),this.props.personal.getIn(["validate","isSuccess"])||this.props.dispatch((0,k.fetchPersonal)()),this.props.personal.getIn(["validate","isNeedToValidate"])||this.props.history.pushState(null,"/personalDetail")}},{key:"_releaseResultRetry",value:function(){this.setState({releaseBindShow:!0,isShowValidateResult:!1})}},{key:"_reduce",value:function(){this.state.second>0?(this.setState({second:this.state.second-1}),setTimeout(this._reduce,1e3)):(this.setState({second:60}),this._reduceFlag=!1)}},{key:"_resetTime",value:function(){this.setState({second:0})}},{key:"_props2State",value:function(e){this.setState({name:{value:e.personal.get("name")},tel:{value:e.personal.get("tel")},bankcard:{value:e.personal.get("bankcard")}})}},{key:"componentWillUnmount",value:function(){this._resetTime()}}]),t}(f.Component))||d)||d);t["default"]=P},118:function(e,t,a){t=e.exports=a(16)(),t.push([e.id,".personal-update{padding:40px 20px 0}.personal-update>footer{display:fixed;height:100px;width:100%;padding:0 20px 20px;position:fixed;left:0;right:0;bottom:0;font-size:0}.personal-update>footer>.cancel{color:#ef4f4f}.personal-update>footer>.cancel,.personal-update>footer>.save{text-align:center;display:inline-block;width:290px;height:80px;line-height:80px;border:2px solid #ef4f4f;font-size:32px;background-color:#fff;border-radius:8px}.personal-update>footer>.save{color:#ef4f4f;color:#fff;background-color:#ef4f4f;margin-left:20px}.personal-update .tel-bind{padding-left:0;height:60px;width:120px;border-radius:8px;line-height:60px;background-color:#ef4f4f;font-size:26px;color:#fff;text-align:center}.bind-modal,.personal-update .tel-bind{z-index:999;position:absolute;right:0;top:0}.bind-modal{left:0;bottom:0;background-color:rgba(0,0,0,.5);padding:30px 50px 0 30px}.bind-modal>main{font-size:0;line-height:90px;background-color:#fff;padding:40px 20px 20px}.bind-modal>main>div{line-height:40px;font-size:26px}.bind-modal>main>label{font-size:26px;display:inline-block;width:140px}.bind-modal>main>input{padding-left:20px;font-size:26px;display:inline-block;width:360px;height:70px;border-radius:8px;border:2px solid #ccc}.bind-modal>main>span{font-size:26px}.bind-modal>main>img{display:block;margin:auto}.bind-modal>main>.get{margin-left:140px;display:inline-block;height:70px;line-height:70px;width:120px;background-color:#ef4f4f;margin-top:10px;border-radius:8px;color:#fff;text-align:center;margin-right:10px}.bind-modal>main>footer{text-align:center;margin-top:60px}.bind-modal>main>footer .cancel{color:#ef4f4f;border:2px solid #ef4f4f;border-radius:8px}.bind-modal>main>footer .cancel,.bind-modal>main>footer>.save{text-align:center;display:inline-block;width:240px;height:80px;line-height:80px;font-size:32px;background-color:#fff}.bind-modal>main>footer>.save{color:#ef4f4f;border:2px solid #ef4f4f;border-radius:8px;color:#fff;background-color:#ef4f4f;margin-left:20px;border:0}",""])},498:function(e,t,a){var n=a(118);"string"==typeof n&&(n=[[e.id,n,""]]);var l=a(17)(n,{});n.locals&&(e.exports=n.locals),n.locals||e.hot.accept(118,function(){var t=a(118);"string"==typeof t&&(t=[[e.id,t,""]]),l(t)}),e.hot.dispose(function(){l()})}});